#!/usr/bin/env sh
#winvm - install windows 10 vm

XDG_DATA_HOME="${XDG_DATA_HOME:-$HOME/.local/share}"
sudo pacman -q --noconfirm -S --needed base-devel vagrant virtualbox ebtables \
    dnsmasq net-tools virtualbox-host-modules-arch linux-headers rdesktop \
    xorg-server-xwayland
sudo modprobe vboxdrv
mkdir -p "$XDG_DATA_HOME/vboxvms/"
vboxmanage setproperty machinefolder "$XDG_DATA_HOME/vboxvms/"
mkdir -p "$XDG_DATA_HOME/winvm"
cp winvm/Vagrantfile "$XDG_DATA_HOME/winvm/Vagrantfile"
cp winvm/provision.ps1 "$XDG_DATA_HOME/winvm/provision.ps1"
cd "$XDG_DATA_HOME/winvm"
vagrant up --provider=virtualbox --provision
vagrant up --provider=virtualbox --provision
